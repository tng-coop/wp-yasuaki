<FilesMatch "composer\.(json|lock)$">
  <IfModule mod_authz_core.c>
    Require all denied
  </IfModule>
  <IfModule !mod_authz_core.c>
    Deny from all
  </IfModule>
</FilesMatch>
<IfModule mod_authz_core.c>
  <FilesMatch "^\.ht">
    Require all denied
  </FilesMatch>
</IfModule>
<IfModule !mod_authz_core.c>
  <FilesMatch "^\.ht">
    Deny from all
  </FilesMatch>
</IfModule>

# ─── Global rewrites ────────────────────────────────────────────────────────────
<IfModule mod_rewrite.c>
    RewriteEngine On

    # 1) Any request for /blazorapp/... should NOT go to WordPress:
    #    - If it’s for a real file/dir (your .dll, .js, css, etc.), serve it
    RewriteCond %{REQUEST_URI}    ^/blazorapp
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    #    - Otherwise (e.g. /blazorapp/edit), serve your SPA’s index.html
    RewriteCond %{REQUEST_URI}    ^/blazorapp
    RewriteRule ^blazorapp/.*$   /blazorapp/index.html [L]

    # 2) Your “bible” redirect
    RewriteCond %{REQUEST_URI}    !^/bible\.html$
    RewriteCond %{REMOTE_ADDR}    !^221\.113\.64\.97$
    RewriteRule ^                 /bible.html [L,R=302]
</IfModule>

# ─── WordPress below ────────────────────────────────────────────────────────────
# Only one WordPress block is needed; remove any duplicates.
# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule>
# END WordPress
